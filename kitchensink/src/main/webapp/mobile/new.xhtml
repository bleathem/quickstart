<!DOCTYPE html>
<html lang="en">

<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:mobile="http://java.sun.com/jsf/composite/components/mobile">
   <h:panelGroup id="newMemberPanel" layout="block" styleClass="mobileContent">
      <br />
      <mobile:memberForm id="memberForm" member="#{newMember}"/>
      <h:outputScript>
         var navigateToList = function (event) {
             if(event.status == 'success' &amp;&amp; $(document.getElementById('mobileForm:valid')).length === 0) {
                 location.hash='list';
             }
         }
      </h:outputScript>
      <h:commandButton id="register" action="#{memberController.register}" value="Register">
            <f:ajax execute="@form" render="newMemberPanel" onevent="navigateToList"/>
      </h:commandButton>
      <h:outputText id="valid" style="display: none;" rendered="#{facesContext.validationFailed}" value="Validation Failed." />
      <h:messages globalOnly="true" />
   </h:panelGroup>
</ui:composition>

</html>